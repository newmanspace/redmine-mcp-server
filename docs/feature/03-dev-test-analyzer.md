# Dev/Test Workload Analyzer - å¼€å‘/æµ‹è¯•äººå‘˜å·¥ä½œé‡åˆ†æ

## ğŸ“‹ åŠŸèƒ½æ¦‚è¿°

åŸºäº Redmine Issue çŠ¶æ€æµè½¬å†å²ï¼Œè‡ªåŠ¨è¯†åˆ«å¼€å‘äººå‘˜å’Œæµ‹è¯•äººå‘˜çš„å·¥ä½œé‡åˆ†å¸ƒï¼Œåˆ†æå›¢é˜Ÿåä½œæ¨¡å¼ã€‚

### æ ¸å¿ƒå®šä¹‰

| è§’è‰² | å®šä¹‰ | è¯†åˆ«æ–¹å¼ |
|------|------|----------|
| **å¼€å‘äººå‘˜** | å°† Issue çŠ¶æ€æ”¹ä¸º"å·²è§£å†³"çš„äºº | æŸ¥æ‰¾ journals ä¸­ `status_id` å˜æ›´ä¸º 3 çš„æ“ä½œäºº |
| **æµ‹è¯•äººå‘˜** | å¼€å‘äººå‘˜åœ¨æ”¹çŠ¶æ€ä¸º"å·²è§£å†³"æ—¶æŒ‡å®šçš„è´Ÿè´£äºº | åŒä¸€ journal ä¸­çš„ `assigned_to_id` å˜æ›´æˆ–å½“å‰ assignee |

---

## ğŸ¯ è®¾è®¡ç›®æ ‡

1. **è‡ªåŠ¨åŒ–è¯†åˆ«** - æ— éœ€äººå·¥æ ‡è®°ï¼ŒåŸºäº Issue å˜æ›´å†å²è‡ªåŠ¨åˆ†æ
2. **å‡†ç¡®å®šä½** - ç²¾ç¡®å®šä½åˆ°æ¯ä¸ª Issue çš„è§£å†³äººå’ŒéªŒè¯äºº
3. **åä½œåˆ†æ** - è¯†åˆ«å¼€å‘ - æµ‹è¯•åä½œæ¨¡å¼ï¼ˆè‡ªè§£è‡ªæµ‹ vs åä½œæµ‹è¯•ï¼‰
4. **å·¥ä½œé‡ç»Ÿè®¡** - æŒ‰äººå‘˜ç»Ÿè®¡è§£å†³/éªŒè¯çš„ Issue æ•°é‡

---

## ğŸ—ï¸ æŠ€æœ¯æ–¹æ¡ˆ

### æ–¹æ¡ˆé€‰æ‹©ï¼šåŸºäº Journals åˆ†æ

| æ–¹æ¡ˆ | ä¼˜ç‚¹ | ç¼ºç‚¹ | é€‰æ‹© |
|------|------|------|------|
| **æ–¹æ¡ˆ 1**: åŸºäºå½“å‰çŠ¶æ€ | ç®€å•å¿«é€Ÿ | æ— æ³•è¯†åˆ«å†å²å˜æ›´ | âŒ |
| **æ–¹æ¡ˆ 2**: åŸºäºæ¯æ—¥å¿«ç…§ | æœ‰å†å²æ•°æ® | ä¸¢å¤±ä¸­é—´å˜æ›´ç»†èŠ‚ | âŒ |
| **æ–¹æ¡ˆ 3**: åŸºäº Journals | å®Œæ•´å‡†ç¡® | API è°ƒç”¨è¾ƒå¤š | âœ… |

### å®ç°æµç¨‹

```
â”Œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”
â”‚  1. è·å–é¡¹ç›®æ‰€æœ‰å·²è§£å†³ Issue (status_id=3)               â”‚
â””â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”˜
                           â†“
â”Œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”
â”‚  2. å¯¹æ¯ä¸ª Issue è·å– journals (å˜æ›´æ—¥å¿—)                â”‚
â””â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”˜
                           â†“
â”Œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”
â”‚  3. æŸ¥æ‰¾ status_id å˜æ›´ä¸º 3 çš„ journal æ¡ç›®              â”‚
â””â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”˜
                           â†“
â”Œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”
â”‚  4. æå–æ“ä½œäºº (developer) å’Œ assignee (tester)          â”‚
â””â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”˜
                           â†“
â”Œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”
â”‚  5. èšåˆç»Ÿè®¡ï¼šå¼€å‘äººå‘˜å·¥ä½œé‡ã€æµ‹è¯•äººå‘˜å·¥ä½œé‡ã€åä½œå¯¹     â”‚
â””â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”˜
```

---

## ğŸ“ æ–‡ä»¶ç»“æ„

```
/docker/redmine-mcp-server/
â”œâ”€â”€ src/redmine_mcp_server/
â”‚   â”œâ”€â”€ dev_test_analyzer.py      # æ ¸å¿ƒåˆ†æå™¨
â”‚   â””â”€â”€ redmine_handler.py        # MCP å·¥å…·å®šä¹‰
â”œâ”€â”€ docs/feature/
â”‚   â””â”€â”€ 03-dev-test-analyzer.md   # æœ¬æ–‡æ¡£
â””â”€â”€ scripts/
    â””â”€â”€ analyze-dev-test.sh       # å‘½ä»¤è¡Œå·¥å…· (å¯é€‰)
```

---

## ğŸ”§ æŠ€æœ¯å®ç°

### æ ¸å¿ƒç±»ï¼šDevTestAnalyzer

```python
class DevTestAnalyzer:
    def __init__(self):
        self.base_url = REDMINE_URL
        self.api_key = REDMINE_API_KEY
        self.headers = {"X-Redmine-API-Key": self.api_key}
        self.status_resolved_id = 3  # "å·²è§£å†³"
    
    def analyze_project(self, project_id: int) -> Dict:
        """åˆ†æå•ä¸ªé¡¹ç›®çš„å¼€å‘/æµ‹è¯•å·¥ä½œé‡"""
        
    def _get_resolved_issues(self, project_id: int) -> List[Dict]:
        """è·å–æ‰€æœ‰å·²è§£å†³ Issue"""
        
    def _get_issue_journals(self, issue_id: int) -> List[Dict]:
        """è·å– Issue çš„å˜æ›´æ—¥å¿—"""
        
    def format_report(self, result: Dict, project_id: int) -> str:
        """ç”Ÿæˆæ ¼å¼åŒ–æŠ¥å‘Š"""
```

### æ•°æ®ç»“æ„

```python
# åˆ†æç»“æœ
{
    "developers": {
        "å¼ ä¸‰": {
            "resolved_count": 10,
            "issues": [123, 456, ...]
        }
    },
    "testers": {
        "æå››": {
            "test_count": 5,
            "issues": [123, ...]
        }
    },
    "collaborations": {
        "å¼ ä¸‰ â†’ æå››": {
            "count": 3,
            "issues": [123, ...]
        }
    },
    "total_issues": 50
}
```

---

## ğŸš€ ä½¿ç”¨æ–¹æ³•

### MCP å·¥å…·è°ƒç”¨

#### å•é¡¹ç›®åˆ†æ

```python
# åˆ†æé¡¹ç›® 341
analyze_dev_tester_workload(project_id=341)
```

#### æ‰€æœ‰è®¢é˜…é¡¹ç›®åˆ†æ

```python
# åˆ†ææ‰€æœ‰è®¢é˜…é¡¹ç›®
analyze_dev_tester_workload()
```

### è¾“å‡ºç¤ºä¾‹

```
======================================================================
ğŸ“Š Project 341 - Dev/Test Workload Analysis
======================================================================
Total Resolved Issues: 17

ğŸ‘¨ğŸ’» Developers (resolved issues):
--------------------------------------------------
åˆ˜ é›…å¨‡                      |   9 issues
æ±ª æ™“å¨Ÿ                      |   3 issues
é‚“ æ—¶æ°                      |   1 issues

ğŸ§ª Testers (assigned to verify):
--------------------------------------------------
åˆ˜ é›…å¨‡                      |   9 issues
æ±ª æ™“å¨Ÿ                      |   3 issues
æ¨ å¿—å¹³                      |   2 issues

ğŸ¤ Collaborations:
--------------------------------------------------
åˆ˜ é›…å¨‡ â†’ åˆ˜ é›…å¨‡                         |   9 issues
æ±ª æ™“å¨Ÿ â†’ æ±ª æ™“å¨Ÿ                         |   3 issues
ç‹ è·¯ â†’ æ¨ å¿—å¹³                          |   1 issues
======================================================================
```

---

## ğŸ“Š åˆ†æç»´åº¦

### 1. ä¸ªäººå·¥ä½œé‡ç»Ÿè®¡

| äººå‘˜ | è§£å†³æ•° | éªŒè¯æ•° | åä½œæ¬¡æ•° |
|------|--------|--------|----------|
| å¼ ä¸‰ | 10 | 2 | 8 |
| æå›› | 5 | 12 | 7 |

### 2. åä½œæ¨¡å¼è¯†åˆ«

| æ¨¡å¼ | è¯´æ˜ | ç¤ºä¾‹ |
|------|------|------|
| **è‡ªè§£è‡ªæµ‹** | å¼€å‘äººå‘˜å’Œæµ‹è¯•äººå‘˜ä¸ºåŒä¸€äºº | å¼ ä¸‰ â†’ å¼ ä¸‰ |
| **åä½œæµ‹è¯•** | å¼€å‘äººå‘˜æŒ‡å®šå…¶ä»–æµ‹è¯•äººå‘˜ | å¼ ä¸‰ â†’ æå›› |
| **å¤šäººåä½œ** | åŒä¸€å¼€å‘äººå‘˜ä¸å¤šä¸ªæµ‹è¯•äººå‘˜åä½œ | å¼ ä¸‰ â†’ æå››ï¼Œå¼ ä¸‰ â†’ ç‹äº” |

### 3. å›¢é˜Ÿæ•ˆç‡åˆ†æ

- **è‡ªè§£è‡ªæµ‹æ¯”ä¾‹**: è¡¡é‡å›¢é˜Ÿè‡ªä¸»éªŒè¯èƒ½åŠ›
- **åä½œå¯†åº¦**: è¡¡é‡å›¢é˜Ÿåä½œç¨‹åº¦
- **å·¥ä½œè´Ÿè½½åˆ†å¸ƒ**: è¯†åˆ«å·¥ä½œåˆ†é…æ˜¯å¦å‡è¡¡

---

## âš™ï¸ é…ç½®è¯´æ˜

### ç¯å¢ƒå˜é‡

| å˜é‡ | è¯´æ˜ | é»˜è®¤å€¼ |
|------|------|--------|
| `REDMINE_URL` | Redmine å®ä¾‹åœ°å€ | (å¿…éœ€) |
| `REDMINE_API_KEY` | API å¯†é’¥ | (å¿…éœ€) |

### çŠ¶æ€ ID æ˜ å°„

| çŠ¶æ€åç§° | çŠ¶æ€ ID | ç”¨é€” |
|----------|--------|------|
| å·²è§£å†³ | 3 | è¯†åˆ«å¼€å‘äººå‘˜ |

å¦‚éœ€é€‚é…å…¶ä»– Redmine å®ä¾‹ï¼Œä¿®æ”¹ `DevTestAnalyzer.status_resolved_id`ã€‚

---

## ğŸ” æ€§èƒ½ä¼˜åŒ–

### æ‰¹é‡è·å–

- ä½¿ç”¨åˆ†é¡µ API (`limit=100`, `offset=N`)
- é¿å…ä¸€æ¬¡æ€§åŠ è½½å¤§é‡æ•°æ®

### ç¼“å­˜ç­–ç•¥

```python
# å¯æ·»åŠ ç¼“å­˜å±‚
@cache(ttl=3600)
def _get_issue_journals(issue_id: int) -> List[Dict]:
    ...
```

### å¼‚æ­¥å¤„ç†

```python
# å¤šé¡¹ç›®åˆ†ææ—¶ä½¿ç”¨å¼‚æ­¥
async def analyze_projects(project_ids: List[int]) -> Dict:
    tasks = [analyze_project(pid) for pid in project_ids]
    results = await asyncio.gather(*tasks)
    ...
```

---

## ğŸ“ˆ æ‰©å±•æ–¹å‘

### 1. æ—¶é—´ç»´åº¦åˆ†æ

```python
# æŒ‰æœˆ/å‘¨ç»Ÿè®¡
def analyze_by_period(project_id: int, period: str = 'month'):
    ...
```

### 2. è¶‹åŠ¿åˆ†æ

```python
# å¼€å‘/æµ‹è¯•å·¥ä½œé‡è¶‹åŠ¿
def get_trend(project_id: int, months: int = 6):
    ...
```

### 3. æ•ˆç‡æŒ‡æ ‡

```python
# å¹³å‡è§£å†³æ—¶é—´ã€å¹³å‡éªŒè¯æ—¶é—´
def get_efficiency_metrics(project_id: int):
    ...
```

### 4. å¯è§†åŒ–æŠ¥å‘Š

```python
# ç”Ÿæˆå›¾è¡¨
def generate_chart(result: Dict, output_path: str):
    ...
```

---

## ğŸ³ Docker éƒ¨ç½²

### æ„å»º

```bash
cd /docker/redmine-mcp-server
docker compose build redmine-mcp-server
```

### å¯åŠ¨

```bash
docker compose up -d redmine-mcp-server
```

### æ—¥å¿—

```bash
docker logs -f redmine-mcp-server
```

---

## âœ… æµ‹è¯•éªŒè¯

### å•å…ƒæµ‹è¯•

```bash
cd /docker/redmine-mcp-server
python -m pytest tests/test_dev_test_analyzer.py -v
```

### é›†æˆæµ‹è¯•

```bash
# æµ‹è¯•é¡¹ç›® 341
curl -X POST http://localhost:8000/mcp \
  -H "Content-Type: application/json" \
  -d '{"jsonrpc":"2.0","id":1,"method":"tools/call","params":{"name":"analyze_dev_tester_workload","arguments":{"project_id":341}}}'
```

---

## ğŸ“ å˜æ›´è®°å½•

| æ—¥æœŸ | ç‰ˆæœ¬ | å˜æ›´å†…å®¹ |
|------|------|----------|
| 2026-02-26 | v1.0 | åˆå§‹ç‰ˆæœ¬ï¼Œå®ç°åŸºç¡€åˆ†æåŠŸèƒ½ |

---

## ğŸ”— ç›¸å…³æ–‡æ¡£

- [01-subscription-feature.md](./01-subscription-feature.md) - é¡¹ç›®è®¢é˜…åŠŸèƒ½
- [02-data-sync.md](./02-data-sync.md) - æ•°æ®åŒæ­¥æœºåˆ¶
- [WAREHOUSE_SYNC.md](../WAREHOUSE_SYNC.md) - æ•°ä»“åŒæ­¥æ–¹æ¡ˆ

---

## ğŸ‘¥ ç»´æŠ¤è€…

- **å¼€å‘**: OpenJaw Team
- **è”ç³»**: openjaw@gmail.com
